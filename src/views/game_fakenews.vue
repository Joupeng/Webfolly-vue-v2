<template>
  <div class="game_fakenews">
    <div class="pillar_left" @click="createGrowRectangle">
      <div class="bridge" :class="bridgeSizeClass"></div>
      <!-- 監聽腳色走到橋中間之後才觸發題目出現-->
      <div class="yellow" :class="{ '-on': isCharacterWalking }"><img
          src="../assets/images/game_fakenews/game_fakenews_yellow.svg" class="yellow_img" alt="">
      </div>
    </div>
    <div class="pillar_right">
      <div class="black"><img src="../assets/images/game_fakenews/game_fakenews_stand.svg" alt=""></div>
    </div>
    <!-- 手機板 -->
    <div class="window" id="window">
      <div class="outer_box_text">
        <div class="text_window">
          <p>{{ text_small }}</p>
        </div>
      </div>
      <div class="stand_circle_photo"><img src="../assets/images/game_fakenews/game_fakenews_circle_stand.svg" alt="">
      </div>
    </div>
    <div v-if="isVisible" class="black_background" id="black_background"></div>
    <div class="black_background_phone" id="black_background_phone">
    </div>

    <div class="return"><img src="../assets/images/game_fakenews/game_fakenews_return.svg" class="return_photo"></div>
    <div v-if="isVisible" class="show_text" id="show_text">
      <p>{{ text_big }}</p>
      <button type="button" @click="skipButton" id="button">略過</button>
    </div>
    <div v-if="isVisible" class="img_container" id="img_container">
      <img src="../assets/images/game_fakenews/game_fakenews_big_stand.svg" class="big_stand">
      <img src="../assets/images/game_fakenews/game_fakenews_medium_stand.svg" class="medium_stand" alt="">
    </div>

    <!-- :class="{ '-on': isCharacterWalking }" -->
    <div id="app" class="card_show">
      <div class="outside_container">
        <div class="score_bar">
          <div class="score">Score:{{ score }}</div>
        </div>
        <div class="container_qs">
          <div class="left_QA">
            <p class="title_qs">選項一</p>
            <div class="inner_qs">
              <p class="content_qs" v-for="(item1, index) in questionText1">
                {{ item1.text }}
              </p>
              <p class="ans_qs">預留詳解位置，但是是要用觸發的方式才會出現,當馬鈴薯發芽時，整顆馬鈴薯產生大量的茄鹼，此種毒性，即使高溫加熱也無法去除。</p>
            </div>
            <!-- <button type="button" value="true" @click="message">確認</button> -->
            <button type="button" @click="addScore(index, 'true')">確認</button>
          </div>
          <div class="right_QA">
            <p class="title_qs">選項二</p>
            <div class="inner_qs">
              <p class="content_qs" v-for="(item2, index) in questionText2">
                {{ item2.text }}
              </p>
              <p class="ans_qs"></p>
            </div>
            <!-- 按鈕各自代表false跟true -->
            <button type="button" @click="addScore(index, 'false')">確認</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
<script>

import { gsap } from 'gsap';
export default {
  data() {
    return {
      bridgeSizeClass: '',  //初始化橋的
      isCharacterWalking: false, //初始化腳色的
      // isShow: false,
      rolePosition: { x: 0, y: 0 },
      text_small: "為了讓你擁有正確媒體識別能力，我將出幾道題目，讓你猜猜哪一個是正確的 ?",
      text_big: "為了讓你擁有正確媒體識別能力，我將出幾道題目，讓你猜猜哪一個是正確的 ?",
      isVisible: true,
      score: 0,
      questionText1: [
        {
          text: "馬鈴薯發芽時會產生毒素，聽說只要把發芽的芽眼切除，其他部位還是可以吃，這是真的嗎？",
          ans: "false",
        }
      ],

      questionText2: [
        {
          text: "澱粉類食物，例如馬鈴薯，經過攝氏120度以上高溫炒炸，容易產生致癌物?",
          ans: "false",
        }
      ],
    }
  },
  watch: {
    'rolePosition'(newPosition, oldPosition) {
      console.log('改變了');
    }

  },
  methods: {
    // 點選略過鈕
    skipButton(e) {
      // alert(123);
      this.isVisible = false;
    },

    // 造橋
    createGrowRectangle() {
      // alert(123);
      if (window.innerWidth <= 667) {
        this.bridgeSizeClass = '-bridge-small';
        this.isCharacterWalking = true;
        // console.log(this.bridgeSizeClass);
        // console.log(this.character_walkClass);
      } else if (window.innerWidth <= 992) {
        this.bridgeSizeClass = '-bridge-medium';
        this.isCharacterWalking = true;
      } else if (window.innerWidth <= 1200) {
        this.bridgeSizeClass = '-bridge-large';
        this.isCharacterWalking = true;
      } else {
        this.bridgeSizeClass = '-bridge-largest';
        this.isCharacterWalking = true;
      }
    },
    addScore(index, ans) {
      // console.log(ans);
      // console.log(this.questionText1[0].ans);
      if (this.questionText1[0].ans == ans || this.questionText2[0].ans == ans) {
        // const currentQuestion = index === 0 ? this.questionText1[0] : this.questionText2[0];
        // if (currentQuestion.ans === ans) {
        alert("答對囉");
        console.log(ans)
        this.score++;
      } else {
        alert("答錯囉");
      }
    },
    checkOrientation() {
      if (window.matchMedia("(orientation: portrait)").matches) {
        alert("請將螢幕轉向橫向以顯示內容！");
      }
    },
    /* quenstionShow() {
       if (this.isShow) {
         alert('123');
       }
     }*/
  },
  mounted() {
    // 頁面加載後立即檢查螢幕方向
    this.checkOrientation();
    //監聽視窗改變即會跳出提醒
    window.addEventListener('resize', this.checkOrientation);
    gsap.to("#window", {
      scaleY: 0,
      delay: 5,
      duration: 1,
      y: 50,
      ease: "power1.out"
    });
    gsap.to("#black_background_phone", {
      scaleY: 0,
      delay: 5,
      duration: 1,
      y: 50,
      ease: "power1.out"
    });
  },
  beforeDestroy() {
    window.removeEventListener('resize', this.createGrowRectangle); // 在组件消毁前移除窗口大小變化的監聽器
  }

}

</script>

